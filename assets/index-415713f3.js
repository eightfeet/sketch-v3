import{r as o,m as J,R as m,c as k,w as D,u as de,a as G,j as e,b as me}from"./index-ef856a27.js";import{_ as fe,s as he,u as pe,a as ge,b as xe,P as Ce,S as P,B as L,c as ve,d as je,I as we,Q as be,r as _e}from"./bundle-074eac37.js";import{B as q,P as ke}from"./PlayIcon-1f16d962.js";import{b as z,d as M,a as Ne,S as ye}from"./SetDuration-6b4b8e20.js";function Pe(n){var i=fe(o.useState(n),2),t=i[0],l=i[1],h=o.useRef(t);h.current=t;var u=o.useCallback(function(){return h.current},[]);return[t,l,u]}function Le(n){return o.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n,{style:Object.assign({verticalAlign:"-0.125em"},n.style),className:["antd-mobile-icon",n.className].filter(Boolean).join(" ")}),o.createElement("g",{id:"ClockCircleOutline-ClockCircleOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"ClockCircleOutline-编组"},o.createElement("rect",{id:"ClockCircleOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),o.createElement("path",{d:"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M24,5 C13.5065898,5 5,13.5065898 5,24 C5,34.4934102 13.5065898,43 24,43 C34.4934102,43 43,34.4934102 43,24 C43,13.5065898 34.4934102,5 24,5 Z M24.6,14 C24.8209139,14 25,14.1790861 25,14.4 L25,23.1715729 C25,23.2776595 25.0337142,23.38027 25.0952092,23.4650801 L25.1464466,23.5251263 L33.2778175,31.6564971 C33.4340272,31.8127068 33.4340272,32.0659728 33.2778175,32.2221825 L31.7221825,33.7778175 C31.5659728,33.9340272 31.3127068,33.9340272 31.1564971,33.7778175 L23.0251263,25.6464466 C22.4192395,25.0405598 22.0584325,24.2354066 22.0065089,23.3850222 L22,23.1715729 L22,14.4 C22,14.1790861 22.1790861,14 22.4,14 L24.6,14 Z",id:"ClockCircleOutline-形状结合",fill:"currentColor",fillRule:"nonzero"}))))}function $e(n){return o.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},n,{style:Object.assign({verticalAlign:"-0.125em"},n.style),className:["antd-mobile-icon",n.className].filter(Boolean).join(" ")}),o.createElement("g",{id:"PictureWrongOutline-PictureWrongOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("g",{id:"PictureWrongOutline-编组"},o.createElement("rect",{id:"PictureWrongOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),o.createElement("path",{d:"M26.6,41 C26.8209139,41 27,41.1790861 27,41.4 L27,43.6 C27,43.8209139 26.8209139,44 26.6,44 L10,44 C6.6862915,44 4,41.3137085 4,38 L4,10 C4,6.6862915 6.6862915,4 10,4 L38,4 C41.3137085,4 44,6.6862915 44,10 L44,27.593 C44,27.8139139 43.8209139,27.993 43.6,27.993 L41.4,27.993 C41.1790861,27.993 41,27.8139139 41,27.593 L41,10 C41,8.40231912 39.75108,7.09633912 38.1762728,7.00509269 L38,7 L10,7 C8.40231912,7 7.09633912,8.24891996 7.00509269,9.82372721 L7,10 L7,38 C7,39.5976809 8.24891996,40.9036609 9.82372721,40.9949073 L10,41 M40.6719687,31.2652801 L42.2275262,32.8204117 C42.383855,32.9765022 42.3838897,33.2297682 42.2277014,33.3859993 C42.2276688,33.3860319 42.2276362,33.3860645 42.2275059,33.3859993 L38.9039017,36.7082163 C38.7475587,36.8642927 38.7475058,37.1175587 38.903683,37.273801 C38.9037165,37.2738346 38.9037501,37.2738682 38.9038844,37.273801 L42.2275232,40.5964595 C42.3838364,40.7525657 42.3838737,41.0058317 42.2276871,41.1620645 C42.2276603,41.1620913 42.2276334,41.1621181 42.2275262,41.1620645 L40.6719687,42.717196 C40.5156899,42.8732755 40.2624843,42.8732759 40.1062051,42.7171968 L36.7818822,39.3938032 C36.6256468,39.2376241 36.3723857,39.2376567 36.2161905,39.3938759 L32.8937222,42.7171241 C32.7375275,42.8733444 32.4842657,42.8733766 32.3280313,42.717196 L30.7724738,41.1620645 C30.6161986,41.0059202 30.6161639,40.7526542 30.7723523,40.5964231 C30.772367,40.5964084 30.7723817,40.5963938 30.7724404,40.5964231 L34.0951519,37.2738374 C34.2513926,37.1176586 34.2513974,36.8643926 34.0951907,36.70818 C34.0951813,36.7081706 34.095172,36.7081613 34.0951346,36.70818 L30.7724577,33.3860357 C30.6161741,33.2298999 30.6161538,32.9766339 30.772351,32.8204117 C30.7723715,32.8203912 30.7723919,32.8203707 30.7724738,32.8204117 L32.3280313,31.2652801 C32.4843206,31.1092247 32.7375129,31.1092166 32.8938123,31.265262 L36.2171004,34.5872142 C36.3734109,34.7432343 36.6265891,34.7432343 36.7828996,34.5872142 L40.1061877,31.265262 C40.2624871,31.1092166 40.5156794,31.1092247 40.6719687,31.2652801 Z M13,40.9990101 L28.6265729,25.372583 C30.18867,23.8104858 32.72133,23.8104858 34.2834271,25.372583 L36.2211004,27.310141 C36.3773147,27.4663461 36.3773223,27.7196121 36.2211172,27.8758264 C36.1461012,27.9508469 36.0443547,27.992993 35.9382628,27.9929921 L32.6494405,27.9929653 C31.9483786,27.412271 30.9237784,27.4203861 30.2317592,28.0173105 L30.1291748,28.1126218 L17.3591558,40.8818615 C17.284142,40.9568707 17.1824041,40.9990101 17.0763217,40.9990101 L13,40.9990101 L13,40.9990101 Z M16,12 C18.7614237,12 21,14.2385763 21,17 C21,19.7614237 18.7614237,22 16,22 C13.2385763,22 11,19.7614237 11,17 C11,14.2385763 13.2385763,12 16,12 Z M16,15 C14.8954305,15 14,15.8954305 14,17 C14,18.1045695 14.8954305,19 16,19 C17.1045695,19 18,18.1045695 18,17 C18,15.8954305 17.1045695,15 16,15 Z",id:"PictureWrongOutline-形状",fill:"currentColor",fillRule:"nonzero"}))))}const S="adm-page-indicator",Se={color:"primary",direction:"horizontal"},Ie=o.memo(n=>{const i=J(Se,n),t=[];for(let l=0;l<i.total;l++)t.push(m.createElement("div",{key:l,className:k(`${S}-dot`,{[`${S}-dot-active`]:i.current===l})}));return D(i,m.createElement("div",{className:k(S,`${S}-${i.direction}`,`${S}-color-${i.color}`)},t))});const Y=n=>D(n,m.createElement("div",{className:"adm-swiper-item",onClick:n.onClick},n.children));function Oe(n){const[i,t]=o.useState(n),l=o.useRef(i);return o.useEffect(()=>{l.current=i},[i]),[i,t,l]}function Re(n,i){const t=Object.keys(n),l=Object.keys(i),h=new Set([...t,...l]),u={};return h.forEach(p=>{const v=n[p],j=i[p];typeof v=="function"&&typeof j=="function"?u[p]=function(...d){v(...d),j(...d)}:u[p]=v||j}),u}const g="adm-swiper",Me={mousedown:"onMouseDown",mousemove:"onMouseMove",mouseup:"onMouseUp"},Ee={defaultIndex:0,allowTouchMove:!0,autoplay:!1,autoplayInterval:3e3,loop:!1,direction:"horizontal",slideSize:100,trackOffset:0,stuckAtBoundary:!0,rubberband:!0,stopPropagation:[]};let R;const Fe=o.forwardRef(he((n,i)=>{const t=J(Ee,n),[l]=o.useState({}),h=o.useRef(null),u=t.direction==="vertical",p=t.slideSize/100,v=t.trackOffset/100,{validChildren:j,count:d}=o.useMemo(()=>{let C=0;return{validChildren:m.Children.map(t.children,b=>!m.isValidElement(b)||b.type!==Y?null:(C++,b)),count:C}},[t.children]);return d===0||!j?null:()=>{let C=t.loop;p*(d-1)<1&&(C=!1);const E=o.useRef(null);function b(){const s=E.current;return s?(u?s.offsetHeight:s.offsetWidth)*t.slideSize/100:0}const[N,ee,te]=Pe(t.defaultIndex),[H,Z,F]=Oe(!1);function I(s){let r=0,a=d-1;return t.stuckAtBoundary&&(r+=v/p,a-=(1-p-v)/p),z(s,r,a)}const[{position:_},B]=de(()=>({position:I(N)*100,config:{tension:200,friction:30},onRest:()=>{if(F.current||!C)return;const s=_.get(),r=100*d,a=W(s,r);a!==s&&B.start({position:a,immediate:!0})}}),[d]),T=o.useRef(null);function se(){var s;(s=T.current)===null||s===void 0||s.call(T),F.current=!1}const ne=pe(s=>{if(T.current=s.cancel,!s.intentional||(s.first&&!R&&(R=l),R!==l))return;R=s.last?void 0:l;const r=b();if(!r)return;const a=u?1:0,f=s.offset[a],w=s.direction[a],O=s.velocity[a];if(Z(!0),!s.last)B.start({position:f*100/r,immediate:!0});else{const U=Math.floor(f/r),le=U+1,ue=Math.round((f+O*2e3*w)/r);$(z(ue,U,le)),window.setTimeout(()=>{Z(!1)})}},{transform:([s,r])=>[-s,-r],from:()=>{const s=b();return[_.get()/100*s,_.get()/100*s]},triggerAllEvents:!0,bounds:()=>{if(C)return{};const s=b(),r=I(0)*s,a=I(d-1)*s;return u?{top:r,bottom:a}:{left:r,right:a}},rubberband:t.rubberband,axis:u?"y":"x",preventScroll:!u,pointer:{touch:!0}});function $(s,r=!1){var a;const f=Math.round(s),w=C?W(f,d):z(f,0,d-1);w!==te()&&((a=t.onIndexChange)===null||a===void 0||a.call(t,w)),ee(w),B.start({position:(C?f:I(f))*100,immediate:r})}function A(){$(Math.round(_.get()/100)+1)}function ie(){$(Math.round(_.get()/100)-1)}o.useImperativeHandle(i,()=>({swipeTo:$,swipeNext:A,swipePrev:ie})),ge(()=>{const s=j.length-1;N>s&&$(s,!0)});const{autoplay:X,autoplayInterval:V}=t,K=()=>{h.current=window.setTimeout(()=>{A(),K()},V)};o.useEffect(()=>{if(!(!X||H))return K(),()=>{h.current&&window.clearTimeout(h.current)}},[X,V,H,d]);function oe(){return C?m.createElement("div",{className:`${g}-track-inner`},m.Children.map(j,(s,r)=>m.createElement(G.div,{className:k(`${g}-slide`,{[`${g}-slide-active`]:N===r}),style:{[u?"y":"x"]:_.to(a=>{let f=-a+r*100;const w=d*100,O=w/2;return f=W(f+O,w)-O,`${f}%`}),[u?"top":"left"]:`-${r*100}%`}},s))):m.createElement(G.div,{className:`${g}-track-inner`,style:{[u?"y":"x"]:_.to(s=>`${-s}%`)}},m.Children.map(j,(s,r)=>m.createElement("div",{className:k(`${g}-slide`,{[`${g}-slide-active`]:N===r})},s)))}const re={"--slide-size":`${t.slideSize}%`,"--track-offset":`${t.trackOffset}%`},ce=Object.assign({},t.allowTouchMove?ne():{}),Q={};for(const s of t.stopPropagation){const r=Me[s];Q[r]=function(a){a.stopPropagation()}}const ae=Re(ce,Q);return D(t,m.createElement("div",{className:k(g,`${g}-${t.direction}`),style:re},m.createElement("div",Object.assign({ref:E,className:k(`${g}-track`,{[`${g}-track-allow-touch-move`]:t.allowTouchMove}),onClickCapture:s=>{F.current&&s.stopPropagation(),se()}},ae),oe()),t.indicator===void 0?m.createElement("div",{className:`${g}-indicator`},m.createElement(Ie,Object.assign({},t.indicatorProps,{total:d,current:N,direction:t.direction}))):t.indicator(d,N)))}}));function W(n,i){const t=n%i;return t<0?t+i:t}const y=xe(Fe,{Item:Y}),Be="https://www.eightfeet.cn/sketch-v3/assets/show-a7fc90e4.jpeg",Te="https://www.eightfeet.cn/sketch-v3/assets/show3-0fea7f9b.jpeg",ze="https://www.eightfeet.cn/sketch-v3/assets/show4-27a4c222.jpeg",We="https://www.eightfeet.cn/sketch-v3/assets/show5-0d23f4ef.jpeg",De="https://www.eightfeet.cn/sketch-v3/assets/show6-2db9e84c.jpeg",He="https://www.eightfeet.cn/sketch-v3/assets/show7-881bc5d7.jpeg",Ze="https://www.eightfeet.cn/sketch-v3/assets/show8-24591856.jpeg",Ae="_root_pjxg3_1",Xe="_head_pjxg3_7",Ve="_button_pjxg3_12",Ke="_nav_pjxg3_21",Qe="_imgs_pjxg3_25",Ue="_swp_pjxg3_33",Ge="_top_pjxg3_39",qe="_info_pjxg3_43",x={root:Ae,head:Xe,button:Ve,nav:Ke,imgs:Qe,swp:Ue,top:Ge,info:qe},Je="_item_1mmxi_1",Ye="_main_1mmxi_11",et="_iconbtn_1mmxi_20",tt="_root_1mmxi_30",st="_iconsbar_1mmxi_34",nt="_mask_1mmxi_46",it="_st1_1mmxi_54",ot="_st2_1mmxi_64",rt="_st3_1mmxi_74",ct="_info_1mmxi_87",at="_btn_1mmxi_91",lt="_startbtn_1mmxi_100",c={item:Je,main:Ye,iconbtn:et,root:tt,iconsbar:st,mask:nt,st1:it,st2:ot,st3:rt,info:ct,btn:at,startbtn:lt},ut=({onEnded:n,...i})=>e.jsx(Ce,{position:"bottom",destroyOnClose:!0,...i,className:c.root,children:e.jsxs(y,{loop:!1,children:[e.jsx(y.Item,{children:e.jsx("div",{className:c.item,children:e.jsxs(P,{className:c.main,block:!0,direction:"vertical",align:"center",children:[e.jsx("h3",{children:"1、设置速写时间"}),e.jsx("div",{className:c.iconsbar,children:e.jsx("div",{className:c.mask,style:{backgroundPositionX:"-373px"},children:" "})}),e.jsx("span",{className:c.info,children:"选择每张图片停留的时间"}),e.jsx("div",{className:c.st1}),e.jsx(L,{className:c.btn,onClick:()=>n==null?void 0:n(),children:"跳过"})]})})}),e.jsx(y.Item,{children:e.jsx("div",{className:c.item,children:e.jsxs(P,{className:c.main,block:!0,direction:"vertical",align:"center",children:[e.jsx("h3",{children:"2、选择速写图片"}),e.jsx("div",{className:c.iconsbar,children:e.jsx("div",{className:c.mask,style:{backgroundPositionX:"-287px"},children:" "})}),e.jsx("span",{className:c.info,children:"筛选您喜欢的速写模特图片"}),e.jsx("div",{className:c.st2}),e.jsx(L,{className:c.btn,onClick:()=>n==null?void 0:n(),children:"跳过"})]})})}),e.jsx(y.Item,{children:e.jsx("div",{className:c.item,children:e.jsxs(P,{className:c.main,block:!0,direction:"vertical",align:"center",children:[e.jsx("h3",{children:"3、开始速写"}),e.jsx("div",{className:c.iconsbar,children:e.jsx("div",{className:c.mask,style:{backgroundPositionX:"-200px"},children:" "})}),e.jsx("span",{className:c.info,children:"点击按钮速写计时开始，每张模特图片按照设定时间轮播"}),e.jsx("div",{className:c.st3}),e.jsx(L,{className:k(c.btn,c.startbtn),onClick:()=>n==null?void 0:n(),children:"开始使用"})]})})})]})});M.extend(Ne);const dt=({name:n="达文西Sketch"})=>{ve(n);const{selected:i=[],duration:t=0}=je(_e),[l,h]=o.useState(!1),u=me();return e.jsxs(P,{block:!0,direction:"vertical",align:"center",justify:"around",className:x.root,children:[e.jsxs("div",{className:x.top,children:[e.jsx(y,{className:x.swp,autoplay:!0,loop:!0,children:[Be,Te,ze,We,De,He,Ze].map((p,v)=>e.jsx(y.Item,{children:e.jsx(we,{className:x.imgs,src:p,fit:"cover"})},v))}),e.jsxs(P,{className:x.head,direction:"vertical",justify:"center",align:"center",children:[e.jsx("span",{className:x.info,children:i.length?e.jsxs(e.Fragment,{children:["速写预计持续",M.duration(M().add(t*i.length,"second").diff(M())).format("HH时mm分ss秒")]}):null}),e.jsxs(P,{className:x.nav,block:!0,justify:"around",children:[e.jsx(ye,{children:e.jsx(q,{content:t?`${Math.floor(t/60)}分${t%60}秒`:null,children:e.jsx(L,{className:x.button,shape:"rounded",color:"primary",children:e.jsx(Le,{fontSize:20})})})}),e.jsx(q,{content:i.length||null,children:e.jsx(L,{className:x.button,shape:"rounded",color:"primary",onClick:()=>u("/list"),children:e.jsx($e,{fontSize:20})})}),e.jsx(L,{className:x.button,shape:"rounded",color:"primary",onClick:()=>u("/view"),children:e.jsx(ke,{fontSize:20})})]})]})]}),e.jsx("footer",{style:{paddingBottom:"24Px"},children:e.jsxs("span",{onClick:()=>h(!0),children:["达文西Art-sketch ",e.jsx(be,{})]})}),e.jsx(ut,{visible:l,onEnded:()=>h(!1)})]})},gt=dt;export{gt as default};
