import{r as l,I as k,j as e,h as g}from"./index-dc8a7631.js";import{F as u,S as d,B as x,e as F,D as m}from"./useDocumentTitle-f2a4c298.js";import{R as w,a as I}from"./bundle-6334df6b.js";import{l as j,T as b,I as f}from"./index-6efb0c9e.js";import{u as C}from"./index-e89c02cb.js";const R="_title_1i1vs_1",y={title:R},A=({onSucess:s,onGetSN:a,onCancel:t})=>{const r=u.useForm()[0],i=l.useCallback(async()=>{j.show();const{name:c,license:n}=r.getFieldsValue();try{await k({username:c,license:n}),b.show("激活成功"),j.hide(),s==null||s()}catch(h){j.hide(),b.show(decodeURI(h))}},[r,s]);return e.jsxs(d,{direction:"vertical",block:!0,children:[e.jsx("h3",{className:y.title,children:"达文西激活"}),e.jsxs(u,{form:r,onFinish:i,className:y.formbody,children:[e.jsx(u.Item,{label:"用户名",name:"name",rules:[{required:!0,message:"请输入用户名"}],children:e.jsx(f,{placeholder:"请输入用户名"})}),e.jsx(u.Item,{label:e.jsxs(d,{block:!0,justify:"between",children:[e.jsx("span",{children:"序列号"}),e.jsx(x,{size:"mini",fill:"outline",onClick:()=>a==null?void 0:a(),children:"没有序列号"})]}),name:"license",rules:[{required:!0,message:"请输入产品序列号"}],children:e.jsx(f,{placeholder:"请输入序列号"})})]}),e.jsxs(d,{block:!0,direction:"vertical",children:[e.jsx(x,{block:!0,type:"submit",color:"primary",size:"large",onClick:r.submit,children:"确定"}),t?e.jsx(x,{block:!0,onClick:t,children:"取消"}):null]})]})},_=({onClick:s,...a})=>{const t=l.useRef(null),r=F(g),i=C(),c=l.useCallback(()=>{var o,p;(p=(o=t.current)==null?void 0:o.audioEl.current)==null||p.play()},[]),n=l.useCallback(()=>{m.show({content:e.jsx(A,{onSucess:()=>m.clear(),onGetSN:()=>{m.clear(),i()},onCancel:()=>m.clear()}),actions:[]})},[i]),h=l.useCallback(o=>{if(!r.auth){n();return}c(),s==null||s(o)},[n,s,c,r.auth]);return e.jsxs(e.Fragment,{children:[e.jsx(w,{ref:t,src:"./warning.mp3"}),e.jsx(I,{fontSize:32,onClick:h,...a})]})};export{A,_ as P};
