import{S as we,s as Z,n as Ce,l as J,o as ee,t as Re,p as xe,q as Ee,v as te,x as Le,y as _,z as se,A as Pe,B as Se,r as c,D as Fe,E as ke,w as H,R as w,m as G,F as Oe,G as le,H as je,c as ce,j as f,e as Me,f as Q,L as Ie}from"./index-6d4ac582.js";import{f as Qe,g as z,h as Te,i as _e,_ as Ne,t as $,c as Ae,j as Be,S as oe,F as re,k as D,B as De,d as Ue,e as We}from"./useDocumentTitle-40ef9602.js";import{B as ze}from"./index-ea323590.js";import{F as He}from"./floating-bubble-496a38e8.js";import{u as $e}from"./index-b9d14d80.js";import{u as ne,N as Ve,I as Ze,S as qe}from"./SelectedList-eb6eff91.js";import{P as Ke}from"./PlayIcon-92a002f6.js";import{A as Ge}from"./avatar-feae8104.js";import{P as Xe}from"./bundle-857d35e6.js";import"./index-b78f6ecc.js";import"./index-6bf24b91.js";class Ye extends we{constructor(e,s){super(),this.client=e,this.options=s,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(s)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),ie(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return q(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return q(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,s){const r=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Z(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const n=this.hasListeners();n&&ae(this.currentQuery,a,this.options,r)&&this.executeFetch(),this.updateResult(s),n&&(this.currentQuery!==a||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const i=this.computeRefetchInterval();n&&(this.currentQuery!==a||this.options.enabled!==r.enabled||i!==this.currentRefetchInterval)&&this.updateRefetchInterval(i)}getOptimisticResult(e){const s=this.client.getQueryCache().build(this.client,e),r=this.createResult(s,e);return et(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const s={};return Object.keys(e).forEach(r=>{Object.defineProperty(s,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),s}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...s}={}){return this.fetch({...s,meta:{refetchPage:e}})}fetchOptimistic(e){const s=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,s);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,s))}fetch(e){var s;return this.executeFetch({...e,cancelRefetch:(s=e.cancelRefetch)!=null?s:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let s=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Ce)),s}updateStaleTimeout(){if(this.clearStaleTimeout(),J||this.currentResult.isStale||!ee(this.options.staleTime))return;const s=Re(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},s)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(J||this.options.enabled===!1||!ee(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||xe.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,s){const r=this.currentQuery,a=this.options,n=this.currentResult,i=this.currentResultState,l=this.currentResultOptions,h=e!==r,u=h?e.state:this.currentQueryInitialState,g=h?this.currentResult:this.previousQueryResult,{state:d}=e;let{dataUpdatedAt:C,error:o,errorUpdatedAt:p,fetchStatus:v,status:y}=d,E=!1,P=!1,b;if(s._optimisticResults){const m=this.hasListeners(),x=!m&&ie(e,s),F=m&&ae(e,r,s,a);(x||F)&&(v=Ee(e.options.networkMode)?"fetching":"paused",C||(y="loading")),s._optimisticResults==="isRestoring"&&(v="idle")}if(s.keepPreviousData&&!d.dataUpdatedAt&&g!=null&&g.isSuccess&&y!=="error")b=g.data,C=g.dataUpdatedAt,y=g.status,E=!0;else if(s.select&&typeof d.data<"u")if(n&&d.data===(i==null?void 0:i.data)&&s.select===this.selectFn)b=this.selectResult;else try{this.selectFn=s.select,b=s.select(d.data),b=te(n==null?void 0:n.data,b,s),this.selectResult=b,this.selectError=null}catch(m){this.selectError=m}else b=d.data;if(typeof s.placeholderData<"u"&&typeof b>"u"&&y==="loading"){let m;if(n!=null&&n.isPlaceholderData&&s.placeholderData===(l==null?void 0:l.placeholderData))m=n.data;else if(m=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof m<"u")try{m=s.select(m),this.selectError=null}catch(x){this.selectError=x}typeof m<"u"&&(y="success",b=te(n==null?void 0:n.data,m,s),P=!0)}this.selectError&&(o=this.selectError,b=this.selectResult,p=Date.now(),y="error");const R=v==="fetching",k=y==="loading",S=y==="error";return{status:y,fetchStatus:v,isLoading:k,isSuccess:y==="success",isError:S,isInitialLoading:k&&R,data:b,dataUpdatedAt:C,error:o,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:R,isRefetching:R&&!k,isLoadingError:S&&d.dataUpdatedAt===0,isPaused:v==="paused",isPlaceholderData:P,isPreviousData:E,isRefetchError:S&&d.dataUpdatedAt!==0,isStale:X(e,s),refetch:this.refetch,remove:this.remove}}updateResult(e){const s=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Z(r,s))return;this.currentResult=r;const a={cache:!0},n=()=>{if(!s)return!0;const{notifyOnChangeProps:i}=this.options,l=typeof i=="function"?i():i;if(l==="all"||!l&&!this.trackedProps.size)return!0;const h=new Set(l??this.trackedProps);return this.options.useErrorBoundary&&h.add("error"),Object.keys(this.currentResult).some(u=>{const g=u;return this.currentResult[g]!==s[g]&&h.has(g)})};(e==null?void 0:e.listeners)!==!1&&n()&&(a.listeners=!0),this.notify({...a,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const s=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const s={};e.type==="success"?s.onSuccess=!e.manual:e.type==="error"&&!Le(e.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()}notify(e){_.batch(()=>{if(e.onSuccess){var s,r,a,n;(s=(r=this.options).onSuccess)==null||s.call(r,this.currentResult.data),(a=(n=this.options).onSettled)==null||a.call(n,this.currentResult.data,null)}else if(e.onError){var i,l,h,u;(i=(l=this.options).onError)==null||i.call(l,this.currentResult.error),(h=(u=this.options).onSettled)==null||h.call(u,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:g})=>{g(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Je(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ie(t,e){return Je(t,e)||t.state.dataUpdatedAt>0&&q(t,e,e.refetchOnMount)}function q(t,e,s){if(e.enabled!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&X(t,e)}return!1}function ae(t,e,s,r){return s.enabled!==!1&&(t!==e||r.enabled===!1)&&(!s.suspense||t.state.status!=="error")&&X(t,s)}function X(t,e){return t.isStaleByTime(e.staleTime)}function et(t,e,s){return s.keepPreviousData?!1:s.placeholderData!==void 0?e.isPlaceholderData:!Z(t.getCurrentResult(),e)}class tt extends Ye{constructor(e,s){super(e,s)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,s){super.setOptions({...e,behavior:se()},s)}getOptimisticResult(e){return e.behavior=se(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...s}={}){return this.fetch({...s,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...s}={}){return this.fetch({...s,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,s){var r,a,n,i,l,h;const{state:u}=e,g=super.createResult(e,s),{isFetching:d,isRefetching:C}=g,o=d&&((r=u.fetchMeta)==null||(a=r.fetchMore)==null?void 0:a.direction)==="forward",p=d&&((n=u.fetchMeta)==null||(i=n.fetchMore)==null?void 0:i.direction)==="backward";return{...g,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Pe(s,(l=u.data)==null?void 0:l.pages),hasPreviousPage:Se(s,(h=u.data)==null?void 0:h.pages),isFetchingNextPage:o,isFetchingPreviousPage:p,isRefetching:C&&!o&&!p}}}const st=Qe.useSyncExternalStore,ue=c.createContext(!1),rt=()=>c.useContext(ue);ue.Provider;function nt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const it=c.createContext(nt()),at=()=>c.useContext(it);function lt(t,e){return typeof t=="function"?t(...e):!!t}const ct=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},ot=t=>{c.useEffect(()=>{t.clearReset()},[t])},ut=({result:t,errorResetBoundary:e,useErrorBoundary:s,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&lt(s,[t.error,r]),ht=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},dt=(t,e)=>t.isLoading&&t.isFetching&&!e,ft=(t,e,s)=>(t==null?void 0:t.suspense)&&dt(e,s),pt=(t,e,s)=>e.fetchOptimistic(t).then(({data:r})=>{t.onSuccess==null||t.onSuccess(r),t.onSettled==null||t.onSettled(r,null)}).catch(r=>{s.clearReset(),t.onError==null||t.onError(r),t.onSettled==null||t.onSettled(void 0,r)});function mt(t,e){const s=Fe({context:t.context}),r=rt(),a=at(),n=s.defaultQueryOptions(t);n._optimisticResults=r?"isRestoring":"optimistic",n.onError&&(n.onError=_.batchCalls(n.onError)),n.onSuccess&&(n.onSuccess=_.batchCalls(n.onSuccess)),n.onSettled&&(n.onSettled=_.batchCalls(n.onSettled)),ht(n),ct(n,a),ot(a);const[i]=c.useState(()=>new e(s,n)),l=i.getOptimisticResult(n);if(st(c.useCallback(h=>{const u=r?()=>{}:i.subscribe(_.batchCalls(h));return i.updateResult(),u},[i,r]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),c.useEffect(()=>{i.setOptions(n,{listeners:!1})},[n,i]),ft(n,l,r))throw pt(n,i,a);if(ut({result:l,errorResetBoundary:a,useErrorBoundary:n.useErrorBoundary,query:i.getCurrentQuery()}))throw l.error;return n.notifyOnChangeProps?l:i.trackResult(l)}function gt(t,e,s){const r=ke(t,e,s);return mt(r,tt)}function vt(t){var e=this,s=c.useRef(!1);return c.useCallback(function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return z(e,void 0,void 0,function(){var n,i;return Te(this,function(l){switch(l.label){case 0:if(s.current)return[2];s.current=!0,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,t.apply(void 0,_e([],Ne(r),!1))];case 2:return n=l.sent(),s.current=!1,[2,n];case 3:throw i=l.sent(),s.current=!1,i;case 4:return[2]}})})},[t])}function yt(t){return c.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),c.createElement("g",{id:"FilterOutline-FilterOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},c.createElement("g",{id:"FilterOutline-编组"},c.createElement("rect",{id:"FilterOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),c.createElement("path",{d:"M38,4 C40.209139,4 42,5.76907707 42,7.95134424 L42,10.9773332 C42,11.5050389 41.7864467,12.0082085 41.4113229,12.3772068 L30,22.7810491 L30,37.3492129 C30,38.7371734 29.2628047,40.0233629 28.057983,40.7374627 L21.0289915,43.7181542 C20.081831,44.2795378 18.8533105,43.9761435 18.2850141,43.0405042 C18.0985157,42.7334543 18,42.3821079 18,42.0240293 L18,22.7810491 L6.7196312,12.4950865 C6.26364602,12.119721 6,11.5636728 6,10.9773332 L6,7.95134424 C6,5.76907707 7.790861,4 10,4 L38,4 Z M38,6.96350818 L10,6.96350818 C9.48716416,6.96350818 9.06449284,7.3448526 9.00672773,7.83614169 L9,7.95134424 L9,10.3374937 C9,10.450388 9.04770634,10.5580256 9.13134834,10.6338487 L20.8686517,21.2739462 C20.9522937,21.3497694 21,21.4574069 21,21.5703012 L21,39.7002583 C21,39.9211722 21.1790861,40.1002583 21.4,40.1002583 C21.4482784,40.1002583 21.496158,40.0915183 21.5413228,40.0744612 L26.5144958,38.1962754 L26.5144958,38.1962754 C26.7780505,38.0400661 26.9520986,37.7743552 26.9914926,37.477912 L27,37.3492129 L27,21.5702904 C27,21.4574024 27.047701,21.3497702 27.1313349,21.2739476 L38.8686651,10.6328595 C38.952299,10.5570368 39,10.4494047 39,10.3365167 L39,7.95134424 L39,7.95134424 C39,7.4447465 38.6139598,7.02721653 38.1166211,6.97015407 L38,6.96350818 Z M42,36.0229179 L42,38.186426 C42,38.4073399 41.8209139,38.586426 41.6,38.586426 L34.4,38.586426 C34.1790861,38.586426 34,38.4073399 34,38.186426 L34,36.0229179 C34,35.802004 34.1790861,35.6229179 34.4,35.6229179 L41.6,35.6229179 C41.8209139,35.6229179 42,35.802004 42,36.0229179 Z M42,30.0959015 L42,32.2594097 C42,32.4803236 41.8209139,32.6594097 41.6,32.6594097 L34.4,32.6594097 C34.1790861,32.6594097 34,32.4803236 34,32.2594097 L34,30.0959015 C34,29.8749876 34.1790861,29.6959015 34.4,29.6959015 L41.6,29.6959015 C41.8209139,29.6959015 42,29.8749876 42,30.0959015 Z M42,24.1688851 L42,26.3323933 C42,26.5533072 41.8209139,26.7323933 41.6,26.7323933 L34.4,26.7323933 C34.1790861,26.7323933 34,26.5533072 34,26.3323933 L34,24.1688851 C34,23.9479712 34.1790861,23.7688851 34.4,23.7688851 L41.6,23.7688851 C41.8209139,23.7688851 42,23.9479712 42,24.1688851 Z",id:"FilterOutline-形状",fill:"currentColor",fillRule:"nonzero"}))))}function he(t){return c.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},t,{style:Object.assign({verticalAlign:"-0.125em"},t.style),className:["antd-mobile-icon",t.className].filter(Boolean).join(" ")}),c.createElement("g",{id:"PicturesOutline-PicturesOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},c.createElement("g",{id:"PicturesOutline-编组"},c.createElement("rect",{id:"PicturesOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),c.createElement("path",{d:"M32,10 C35.3137085,10 38,12.6862915 38,16 L38,38 C38,41.3137085 35.3137085,44 32,44 L10,44 C6.6862915,44 4,41.3137085 4,38 L4,16 C4,12.6862915 6.6862915,10 10,10 L32,10 Z M32,13 L10,13 C8.40231912,13 7.09633912,14.24892 7.00509269,15.8237272 L7,16 L7,38 C7,39.5976809 8.24891996,40.9036609 9.82372721,40.9949073 L10,41 C13.1111111,41 15.4444444,41 17,41 C20.3333333,41 25.3333333,41 32,41 C33.5976809,41 34.9036609,39.75108 34.9949073,38.1762728 L35,38 L35,33.332 L30.7808252,29.1126218 C30.0818755,28.4136721 28.9683937,28.3819016 28.2317592,29.0173105 L28.1291748,29.1126218 L16.8091025,40.4319451 L16.242,40.9990101 L12,40.9990101 L26.6265729,26.372583 C28.18867,24.8104858 30.72133,24.8104858 32.2834271,26.372583 L35,29.089 L35,16 C35,14.4023191 33.75108,13.0963391 32.1762728,13.0050927 L32,13 Z M38,4 C41.3137085,4 44,6.6862915 44,10 L44,34 L41,34 L41,10 C41,8.40231912 39.75108,7.09633912 38.1762728,7.00509269 L38,7 L14,7 L14,4 L38,4 Z M14.5,16 C16.9852814,16 19,18.0147186 19,20.5 C19,22.9852814 16.9852814,25 14.5,25 C12.0147186,25 10,22.9852814 10,20.5 C10,18.0147186 12.0147186,16 14.5,16 Z M14.5,19 C13.6715729,19 13,19.6715729 13,20.5 C13,21.3284271 13.6715729,22 14.5,22 C15.3284271,22 16,21.3284271 16,20.5 C16,19.6715729 15.3284271,19 14.5,19 Z",id:"PicturesOutline-形状",fill:"currentColor",fillRule:"nonzero"}))))}const de="adm-grid",bt=t=>{const e={"--columns":t.columns.toString()},{gap:s}=t;return s!==void 0&&(Array.isArray(s)?(e["--gap-horizontal"]=$(s[0]),e["--gap-vertical"]=$(s[1])):e["--gap"]=$(s)),H(t,w.createElement("div",{className:de,style:e},t.children))},wt=t=>{const e=G({span:1},t),s={"--item-span":e.span};return H(e,w.createElement("div",{className:`${de}-item`,style:s,onClick:e.onClick},e.children))},Ct=Ae(bt,{Item:wt});function Rt(t){return t===window}const fe="adm-infinite-scroll",xt={threshold:250,children:(t,e,s)=>w.createElement(Lt,{hasMore:t,failed:e,retry:s})},Et=t=>{const e=G(xt,t),[s,r]=c.useState(!1),a=vt(o=>z(void 0,void 0,void 0,function*(){try{yield e.loadMore(o)}catch(p){throw r(!0),p}})),n=c.useRef(null),[i,l]=c.useState({}),h=c.useRef(i),[u,g]=c.useState(),{run:d}=$e(()=>z(void 0,void 0,void 0,function*(){if(h.current!==i||!e.hasMore)return;const o=n.current;if(!o||!o.offsetParent)return;const p=Oe(o);if(g(p),!p)return;const y=o.getBoundingClientRect().top;if((Rt(p)?window.innerHeight:p.getBoundingClientRect().bottom)>=y-e.threshold){const P={};h.current=P,yield a(!1),l(P)}}),{wait:100,leading:!0,trailing:!0});c.useEffect(()=>{d()}),c.useEffect(()=>{if(!n.current||!u)return;function p(){d()}return u.addEventListener("scroll",p),()=>{u.removeEventListener("scroll",p)}},[u]);function C(){return z(this,void 0,void 0,function*(){r(!1),yield a(!0),l(h.current)})}return H(e,w.createElement("div",{className:fe,ref:n},typeof e.children=="function"?e.children(e.hasMore,s,C):e.children))},Lt=t=>{const{locale:e}=le();return t.hasMore?t.failed?w.createElement("span",null,w.createElement("span",{className:`${fe}-failed-text`},e.InfiniteScroll.failedToLoad),w.createElement("a",{onClick:()=>{t.retry()}},e.InfiniteScroll.retry)):w.createElement(w.Fragment,null,w.createElement("span",null,e.common.loading),w.createElement(je,null)):w.createElement("span",null,e.InfiniteScroll.noMore)};const Pt=c.memo(()=>w.createElement("svg",{width:"17px",height:"13px",viewBox:"0 0 17 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},w.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},w.createElement("g",{transform:"translate(-2832.000000, -1103.000000)",stroke:"#FFFFFF",strokeWidth:"3"},w.createElement("g",{transform:"translate(2610.000000, 955.000000)"},w.createElement("g",{transform:"translate(24.000000, 91.000000)"},w.createElement("g",{transform:"translate(179.177408, 36.687816)"},w.createElement("polyline",{points:"34.2767388 22 24.797043 31.4796958 21 27.6826527"})))))))),M="adm-selector",St={multiple:!1,defaultValue:[],showCheckMark:!0},U=t=>{const e=G(St,t),[s,r]=Be({value:e.value,defaultValue:e.defaultValue,onChange:i=>{var l;const h={get items(){return e.options.filter(u=>i.includes(u.value))}};(l=e.onChange)===null||l===void 0||l.call(e,i,h)}}),{locale:a}=le(),n=e.options.map(i=>{const l=(s||[]).includes(i.value),h=i.disabled||e.disabled,u=ce(`${M}-item`,{[`${M}-item-active`]:l&&!e.multiple,[`${M}-item-multiple-active`]:l&&e.multiple,[`${M}-item-disabled`]:h});return w.createElement("div",{key:i.value,className:u,onClick:()=>{if(!h)if(e.multiple){const g=l?s.filter(d=>d!==i.value):[...s,i.value];r(g)}else{const g=l?[]:[i.value];r(g)}},role:"option","aria-selected":l&&!e.multiple||l&&e.multiple},i.label,i.description&&w.createElement("div",{className:`${M}-item-description`},i.description),l&&e.showCheckMark&&w.createElement("div",{className:`${M}-check-mark-wrapper`},w.createElement(Pt,null)))});return H(e,w.createElement("div",{className:M,role:"listbox","aria-label":a.Selector.name},!e.columns&&w.createElement(oe,{wrap:!0},n),e.columns&&w.createElement(Ct,{columns:e.columns},n)))};function L(t,e,s,r){if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?r:s==="a"?r.call(t):r?r.value:e.get(t)}function T(t,e,s,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,s):a?a.value=s:e.set(t,s),s}function Ft(t,e){e===void 0&&(e={});var s=e.insertAt;if(!(!t||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s==="top"&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}var kt=`wc-waterfall {\r
  position: relative;\r
  display: block;\r
  box-sizing: content-box !important;\r
}\r
      \r
wc-waterfall > * {\r
  position: absolute;\r
  box-sizing: border-box;\r
}\r
`;Ft(kt);function Ot(t){let e=0;for(let s=0;s<t.length;s++)e=t[e]<=t[s]?e:s;return e}function jt(t,{getW:e,setW:s,getH:r,setH:a,getPad:n,setX:i,setY:l,getChildren:h},{cols:u,gap:g}){const[d,C,o,p]=n(t),v=h(t),y=v.length;if(y){const E=(e(t)-g*(u-1)-(p+C))/u;Array.prototype.forEach.call(v,R=>s(R,E));const P=Array.prototype.map.call(v,R=>r(R)),b=Array(u).fill(d);for(let R=0;R<y;R++){const k=v[R],S=Ot(b);l(k,b[S]),i(k,p+(E+g)*S),b[S]+=P[R]+g}a(t,Math.max(...b)-g+o)}else a(t,d+o)}var K,O,N,I,A,pe;class B extends HTMLElement{constructor(){super(),K.add(this),Object.defineProperty(this,"_fl_w",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fl_h",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),O.set(this,void 0),N.set(this,void 0),I.set(this,void 0),A.set(this,!1)}get gap(){return+(this.getAttribute("gap")||B.default_props.gap)}set gap(e){this.setAttribute("gap",e+"")}get cols(){return+(this.getAttribute("cols")||B.default_props.cols)}set cols(e){this.setAttribute("cols",e+"")}connectedCallback(){T(this,O,new ResizeObserver(e=>e.some(({target:s})=>s._fl_w!=s.offsetWidth||s._fl_h!=s.offsetHeight)&&this.relayout()),"f"),L(this,O,"f").observe(this),Array.prototype.forEach.call(this.children,e=>L(this,O,"f").observe(e)),this.relayout(),T(this,N,new MutationObserver(e=>{e.forEach(s=>{s.addedNodes.forEach(r=>r instanceof HTMLElement&&L(this,O,"f").observe(r)),s.removedNodes.forEach(r=>r instanceof HTMLElement&&L(this,O,"f").unobserve(r))}),this.relayout()}),"f"),L(this,N,"f").observe(this,{childList:!0,attributes:!1}),T(this,I,new MutationObserver(()=>this.relayout()),"f"),L(this,I,"f").observe(this,{childList:!1,attributes:!0})}disconnectedCallback(){L(this,O,"f").disconnect(),L(this,N,"f").disconnect(),L(this,I,"f").disconnect()}relayout(){L(this,A,"f")||(T(this,A,!0,"f"),requestAnimationFrame(()=>{L(this,K,"m",pe).call(this),T(this,A,!1,"f")}))}}O=new WeakMap,N=new WeakMap,I=new WeakMap,A=new WeakMap,K=new WeakSet,pe=function(){jt(this,{getW:t=>t.offsetWidth,setW:(t,e)=>t.style.width=e+"px",getH:t=>(t._fl_w=t.offsetWidth,t._fl_h=t.offsetHeight),setH:(t,e)=>t.style.height=e+"px",getPad:t=>{const e=getComputedStyle(t);return[parseInt(e.paddingTop),parseInt(e.paddingRight),-parseInt(e.paddingTop),parseInt(e.paddingLeft)]},setX:(t,e)=>t.style.left=e+"px",setY:(t,e)=>t.style.top=e+"px",getChildren:t=>t.children},{cols:this.cols,gap:this.gap}),this._fl_w=this.offsetWidth,this._fl_h=this.offsetHeight,L(this,I,"f").takeRecords()},Object.defineProperty(B,"default_props",{enumerable:!0,configurable:!0,writable:!0,value:Object.freeze({cols:2,gap:4})}),customElements.define("wc-waterfall",B);const Mt="_nav_1cnmc_1",It="_root_1cnmc_10",Qt="_subnav_1cnmc_14",Tt="_play_1cnmc_19",_t="_disablePlay_1cnmc_26",W={nav:Mt,root:It,subnav:Qt,play:Tt,disablePlay:_t},me=5,Nt=["https://www.eightfeet.cn/md1/assets/models/037-x&840&696.jpg","https://www.eightfeet.cn/md1/assets/models/011-y&410&716.jpg","https://www.eightfeet.cn/md1/assets/models/025-y&468&701.jpg","https://www.eightfeet.cn/md1/assets/models/177-y&832&961.jpg","https://www.eightfeet.cn/md1/assets/models/196-y&729&1096.jpg","https://www.eightfeet.cn/md1/assets/models/401-y&898&1420.jpg","https://www.eightfeet.cn/md1/assets/models/2216-y&980&1470.jpg","https://www.eightfeet.cn/md5/small/md269/10-y&734&1000.png","https://www.eightfeet.cn/md5/small/md312/9-y&3004&4243.JPG","https://www.eightfeet.cn/md5/small/md270/10-y&800&1097.png"],At=({page:t,size:e=me,error:s})=>new Promise((r,a)=>{if(s){a();return}setTimeout(()=>{const n=[],i=t*e;for(let h=i-e;h<i;h++)n.push({src:Nt[Math.floor(Math.random()*10)],name:"string",tag:["1","2","3","4","5","6"],_id:`${Date.now()}_${t}_${h}`});const l={data:n,total:100};console.log(l),r(l)},1e3)});var ge=(t=>(t.全部="0",t.人物="1",t.静物="2",t))(ge||{}),ve=(t=>(t.全部="0",t.男="1",t.女="2",t.组合="3",t))(ve||{}),ye=(t=>(t.全部="0",t.动态="1",t.角色="2",t.头像="3",t.半身="4",t.手足="5",t.五官="6",t.解剖="7",t.动漫="8",t))(ye||{});const V=t=>Object.keys(t).map((e,s)=>({label:e,value:Object.values(t)[s]})),Bt=({onFilter:t,models:e=[],defaultValues:s={},onChange:r,...a})=>{const n=re.useForm()[0],i=c.useRef({}),[l,h]=c.useState(!0);c.useEffect(()=>{var o,p;s&&a.visible&&(n.setFieldsValue(s),h(((o=s.category)==null?void 0:o.includes("0"))||((p=s.category)==null?void 0:p.includes("1"))),setTimeout(()=>{i.current=s},100))},[s,n,a.visible]);const u=c.useCallback(o=>{const p={};for(const v in o)if(Object.prototype.hasOwnProperty.call(o,v)){const y=o[v];y!=null&&y.length&&(p[v]=y)}return p},[]),g=c.useCallback(o=>{const p=Object.keys(o)[0],v=Object.values(o)[0],y=i.current[p];if(y!=null&&y.includes("0")){if(v!=null&&v.length){const P=v.filter(b=>b!=="0");n.setFieldValue(p,P)}}else v!=null&&v.includes("0")&&n.setFieldValue(p,["0"]);const E=n.getFieldsValue();r==null||r(u(E)),i.current=E},[n,u,r]),d=c.useCallback(()=>{const o=n.getFieldValue("category")||[];h(o.includes("0")||o.includes("1"))},[n]);c.useEffect(()=>{a.visible&&(i.current=n.getFieldsValue())},[n,l,a.visible]);const C=c.useCallback(()=>{const o=n.getFieldsValue();t==null||t(u(o))},[n,u,t]);return f.jsxs(Xe,{...a,children:[f.jsx("div",{style:{maxHeight:"60vh",overflowY:"auto"},children:f.jsxs(re,{form:n,onValuesChange:g,onFieldsChange:d,onFinish:C,children:[f.jsx(D,{name:"category",label:"类别",children:f.jsx(U,{multiple:!0,options:V(ge)})}),l?f.jsx(D,{name:"gender",label:"性别",children:f.jsx(U,{multiple:!0,options:V(ve)})}):null,l?f.jsx(D,{name:"sub",label:"属性",children:f.jsx(U,{multiple:!0,options:V(ye)})}):null,e!=null&&e.length?f.jsx(D,{name:"md",label:"模特",children:f.jsx(U,{multiple:!0,options:[{label:f.jsxs("div",{children:[f.jsx(he,{}),f.jsx("div",{children:"全部"})]}),value:"0"}].concat((e==null?void 0:e.map((o,p)=>({label:f.jsx(Ge,{src:o.src},p),value:o.id})))||[])})}):null]})}),f.jsx("div",{style:{margin:"14px"},children:f.jsx(De,{type:"submit",block:!0,color:"primary",onClick:n.submit,children:"确定"})})]})},Dt=({name:t="list"})=>{Ue(t);const{selected:e}=We(Q),s=Me(),[r,a]=c.useState(!1),[n,i]=c.useState(!1),[l,h]=c.useState({category:["0"],md:["0"],gender:["0"],sub:["0"]}),u=ne("(min-width: 768px)"),g=ne("(min-width: 1024px)"),d={cols:3,gap:10};u&&(d.cols=6),g&&(d.cols=8);const C=c.useRef(!0),o=c.useCallback(async({page:m})=>At({page:m,error:!1}).catch(x=>{throw C.current=!1,x}),[]),{isLoading:p,data:v,fetchNextPage:y,isFetchedAfterMount:E,isError:P}=gt({queryKey:["InventoryInquiry"],queryFn:({pageParam:m})=>o(m||{page:1}),getNextPageParam:(m,x)=>{const{total:F}=m,j=x.length,be=x.length*me;if(F>be)return{page:j+1};C.current=!1},refetchOnWindowFocus:!1}),b=(v==null?void 0:v.pages.flatMap(m=>m.data))||[],R=c.useCallback((m,x)=>{var F;m||(Q.selected=(Q.selected||[]).concat(x)),m&&(Q.selected=(F=Q.selected)==null?void 0:F.filter(j=>j._id!==x._id))},[]),k=c.useCallback(()=>{a(!1)},[]),S=c.useCallback(()=>{s("/view")},[s]),Y=c.useCallback(m=>{i(!1),h(m),console.log("Filter",m)},[]);return f.jsxs("div",{className:W.root,children:[!(b!=null&&b.length)&&E?"暂无数据":null,p&&!E?f.jsx(Ie,{}):null,f.jsx("div",{className:W.nav,children:f.jsx(Ve,{onBack:()=>s("/"),right:f.jsxs(oe,{children:[f.jsx(ze,{content:(e==null?void 0:e.length)||null,children:f.jsx(he,{fontSize:24,onClick:()=>a(!0)})}),f.jsx("span",{children:" "}),f.jsx(yt,{fontSize:24,onClick:()=>i(!0)})]}),children:"选择图片"})}),f.jsx("wc-waterfall",{...d,children:b.map((m,x)=>{const F=e==null?void 0:e.some(j=>m._id===j._id);return f.jsx(Ze,{src:m.src,toggleType:F?["icon"]:["block","icon"],selected:F,onToggle:j=>R(j,m)},x)})}),!P&&(b!=null&&b.length)?f.jsx(Et,{loadMore:y,hasMore:C.current}):null,f.jsx(qe,{visible:r,onMaskClick:()=>a(!1),onClear:k}),f.jsx(He,{axis:"xy",magnetic:"x",className:ce(W.play,{[W.disablePlay]:!(e!=null&&e.length)}),children:f.jsx(Ke,{fontSize:32,onClick:()=>(e==null?void 0:e.length)&&S()})}),f.jsx(Bt,{visible:n,onMaskClick:()=>i(!1),defaultValues:l,onFilter:Y,onChange:m=>console.log("change",m),models:[{src:"111",id:"1"}]})]})},Yt=Dt;export{Yt as default};
