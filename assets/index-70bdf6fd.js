var w=Object.defineProperty;var g=(a,o,e)=>o in a?w(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e;var i=(a,o,e)=>(g(a,typeof o!="symbol"?o+"":o,e),e);import{r as l,m as E,K as x,w as _,R as s,c as F,Z as K,M as P}from"./index-ce1eb5c4.js";import{f as S,a as I,o as R,C as k,b as N}from"./useDocumentTitle-c0da52a3.js";const h="adm-input",L={defaultValue:"",onlyShowClearWhenFocus:!0},M=l.forwardRef((a,o)=>{const e=E(L,a),[u,c]=S(e),[f,v]=l.useState(!1),d=l.useRef(!1),r=l.useRef(null),{locale:p}=x();l.useImperativeHandle(o,()=>({clear:()=>{c("")},focus:()=>{var t;(t=r.current)===null||t===void 0||t.focus()},blur:()=>{var t;(t=r.current)===null||t===void 0||t.blur()},get nativeElement(){return r.current}}));const C=t=>{var n;e.onEnterPress&&(t.code==="Enter"||t.keyCode===13)&&e.onEnterPress(t),(n=e.onKeyDown)===null||n===void 0||n.call(e,t)};I(()=>{var t;if(e.enterKeyHint)return(t=r.current)===null||t===void 0||t.setAttribute("enterkeyhint",e.enterKeyHint),()=>{var n;(n=r.current)===null||n===void 0||n.removeAttribute("enterkeyhint")}},[e.enterKeyHint]);function y(){let t=u;if(e.type==="number"){const n=t&&N(parseFloat(t),e.min,e.max).toString();Number(t)!==Number(n)&&(t=n)}t!==u&&c(t)}const b=(()=>!e.clearable||!u||e.readOnly?!1:e.onlyShowClearWhenFocus?f:!0)();return _(e,s.createElement("div",{className:F(`${h}`,e.disabled&&`${h}-disabled`)},s.createElement("input",{ref:r,className:`${h}-element`,value:u,onChange:t=>{c(t.target.value)},onFocus:t=>{var n;v(!0),(n=e.onFocus)===null||n===void 0||n.call(e,t)},onBlur:t=>{var n;v(!1),y(),(n=e.onBlur)===null||n===void 0||n.call(e,t)},id:e.id,placeholder:e.placeholder,disabled:e.disabled,readOnly:e.readOnly,maxLength:e.maxLength,minLength:e.minLength,max:e.max,min:e.min,autoComplete:e.autoComplete,autoFocus:e.autoFocus,pattern:e.pattern,inputMode:e.inputMode,type:e.type,name:e.name,autoCapitalize:e.autoCapitalize,autoCorrect:e.autoCorrect,onKeyDown:C,onKeyUp:e.onKeyUp,onCompositionStart:t=>{var n;d.current=!0,(n=e.onCompositionStart)===null||n===void 0||n.call(e,t)},onCompositionEnd:t=>{var n;d.current=!1,(n=e.onCompositionEnd)===null||n===void 0||n.call(e,t)},onClick:e.onClick,step:e.step,role:e.role,"aria-valuenow":e["aria-valuenow"],"aria-valuemax":e["aria-valuemax"],"aria-valuemin":e["aria-valuemin"],"aria-label":e["aria-label"]}),b&&s.createElement("div",{className:`${h}-clear`,onMouseDown:t=>{t.preventDefault()},onClick:()=>{var t,n;c(""),(t=e.onClear)===null||t===void 0||t.call(e),R()&&d.current&&(d.current=!1,(n=r.current)===null||n===void 0||n.blur())},"aria-label":p.Input.clear},s.createElement(k,null))))});function m(a,o){return e=>{try{a()}catch{}if(o)throw e;return e}}class V{constructor(){i(this,"refCount",0);i(this,"container");i(this,"root");i(this,"show",()=>{this.refCount+=1,this.refCount===1&&this.create()});i(this,"hide",()=>{this.refCount-=1,this.refCount===0?this.destroy():this.refCount<0&&(console.warn(`Instance refCount: ${this.refCount}`),this.refCount=0)});i(this,"using",o=>Promise.resolve().then(m(this.show)).then(o).then(m(this.hide),m(this.hide,!0)))}reset(){this.refCount=0,this.destroy()}create(){this.container||(this.container=document.createElement("div"),K.createRoot(this.container).render(s.createElement(P)),document.body.appendChild(this.container))}destroy(){var o;this.container&&((o=this.root)==null||o.unmount(),document.body.removeChild(this.container),this.container=void 0)}}const O=new V;export{M as I,O as l};
