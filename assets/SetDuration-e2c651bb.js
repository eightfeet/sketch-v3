import{c as K,R as y,w as tt,r as R,G as ot,m as ct,b as lt,g as mt,f as Q,j as A}from"./index-dc8a7631.js";import{N as et,O as nt,P,u as dt,R as ft,j as ht,e as gt,F as q,D as vt}from"./useDocumentTitle-f2a4c298.js";function Nt(r,e){return r.reduce((t,n)=>Math.abs(t-e)<Math.abs(n-e)?t:n)}const W="adm-slider",bt=({points:r,max:e,min:t,upperBound:n,lowerBound:s})=>{const o=e-t,g=r.map(f=>{const l=`${Math.abs(f-t)/o*100}%`,m=f<=n&&f>=s,S={left:l},M=K({[`${W}-tick`]:!0,[`${W}-tick-active`]:m});return y.createElement("span",{className:M,style:S,key:f})});return y.createElement("div",{className:`${W}-ticks`},g)},yt=bt,X="adm-slider-mark",St=({marks:r,upperBound:e,lowerBound:t,max:n,min:s})=>{const o=Object.keys(r),g=n-s,f=o.map(parseFloat).sort((l,m)=>l-m).filter(l=>l>=s&&l<=n).map(l=>{const m=r[l];if(!m&&m!==0)return null;const S=l<=e&&l>=t,M=K({[`${X}-text`]:!0,[`${X}-text-active`]:S}),E={left:`${(l-s)/g*100}%`};return y.createElement("span",{className:M,style:E,key:l},m)});return y.createElement("div",{className:X},f)},$t=St;function J(){return typeof BigInt=="function"}function rt(r){return!r&&r!==0&&!Number.isNaN(r)||!String(r).trim()}function L(r){var e=r.trim(),t=e.startsWith("-");t&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var n=e||"0",s=n.split("."),o=s[0]||"0",g=s[1]||"0";o==="0"&&g==="0"&&(t=!1);var f=t?"-":"";return{negative:t,negativeStr:f,trimStr:n,integerStr:o,decimalStr:g,fullStr:"".concat(f).concat(n)}}function Z(r){var e=String(r);return!Number.isNaN(Number(e))&&e.includes("e")}function G(r){var e=String(r);if(Z(r)){var t=Number(e.slice(e.indexOf("e-")+2)),n=e.match(/\.(\d+)/);return n!=null&&n[1]&&(t+=n[1].length),t}return e.includes(".")&&st(e)?e.length-e.indexOf(".")-1:0}function it(r){var e=String(r);if(Z(r)){if(r>Number.MAX_SAFE_INTEGER)return String(J()?BigInt(r).toString():Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return String(J()?BigInt(r).toString():Number.MIN_SAFE_INTEGER);e=r.toFixed(G(e))}return L(e).fullStr}function st(r){return typeof r=="number"?!Number.isNaN(r):r?/^\s*-?\d+(\.\d+)?\s*$/.test(r)||/^\s*-?\d+\.\s*$/.test(r)||/^\s*-?\.\d+\s*$/.test(r):!1}var pt=function(){function r(e){if(nt(this,r),P(this,"origin",""),P(this,"negative",void 0),P(this,"integer",void 0),P(this,"decimal",void 0),P(this,"decimalLen",void 0),P(this,"empty",void 0),P(this,"nan",void 0),rt(e)){this.empty=!0;return}if(this.origin=String(e),e==="-"||Number.isNaN(e)){this.nan=!0;return}var t=e;if(Z(t)&&(t=Number(t)),t=typeof t=="string"?t:it(t),st(t)){var n=L(t);this.negative=n.negative;var s=n.trimStr.split(".");this.integer=BigInt(s[0]);var o=s[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}return et(r,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var n="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(n)}},{key:"negate",value:function(){var t=new r(this.toString());return t.negative=!t.negative,t}},{key:"cal",value:function(t,n,s){var o=Math.max(this.getDecimalStr().length,t.getDecimalStr().length),g=this.alignDecimal(o),f=t.alignDecimal(o),l=n(g,f).toString(),m=s(o),S=L(l),M=S.negativeStr,E=S.trimStr,D="".concat(M).concat(E.padStart(m+1,"0"));return new r("".concat(D.slice(0,-m),".").concat(D.slice(-m)))}},{key:"add",value:function(t){if(this.isInvalidate())return new r(t);var n=new r(t);return n.isInvalidate()?this:this.cal(n,function(s,o){return s+o},function(s){return s})}},{key:"multi",value:function(t){var n=new r(t);return this.isInvalidate()||n.isInvalidate()?new r(NaN):this.cal(n,function(s,o){return s*o},function(s){return s*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(t==null?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":L("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),r}(),kt=function(){function r(e){if(nt(this,r),P(this,"origin",""),P(this,"number",void 0),P(this,"empty",void 0),rt(e)){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return et(r,[{key:"negate",value:function(){return new r(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new r(t);var n=Number(t);if(Number.isNaN(n))return this;var s=this.number+n;if(s>Number.MAX_SAFE_INTEGER)return new r(Number.MAX_SAFE_INTEGER);if(s<Number.MIN_SAFE_INTEGER)return new r(Number.MIN_SAFE_INTEGER);var o=Math.max(G(this.number),G(n));return new r(s.toFixed(o))}},{key:"multi",value:function(t){var n=Number(t);if(this.isInvalidate()||Number.isNaN(n))return new r(NaN);var s=this.number*n;if(s>Number.MAX_SAFE_INTEGER)return new r(Number.MAX_SAFE_INTEGER);if(s<Number.MIN_SAFE_INTEGER)return new r(Number.MIN_SAFE_INTEGER);var o=Math.max(G(this.number),G(n));return new r(s.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(t==null?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":it(this.number):this.origin}}]),r}();function j(r){return J()?new pt(r):new kt(r)}function at(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(r==="")return"";var s=L(r),o=s.negativeStr,g=s.integerStr,f=s.decimalStr,l="".concat(e).concat(f),m="".concat(o).concat(g);if(t>=0){var S=Number(f[t]);if(S>=5&&!n){var M=j(r).add("".concat(o,"0.").concat("0".repeat(t)).concat(10-S));return at(M.toString(),e,t,n)}return t===0?m:"".concat(m).concat(e).concat(f.padEnd(t,"0").slice(0,t))}return l===".0"?m:"".concat(m).concat(l)}const Et=r=>tt(r,y.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},y.createElement("g",{fill:"currentColor",fillRule:"evenodd"},y.createElement("rect",{x:10,width:4,height:24,rx:2}),y.createElement("rect",{y:4,width:4,height:16,rx:2}),y.createElement("rect",{x:20,y:4,width:4,height:16,rx:2})))),z="adm-slider",xt=r=>{const{value:e,min:t,max:n,disabled:s,icon:o,residentPopover:g,onDrag:f}=r,l=R.useRef(e),{locale:m}=ot(),S=()=>({left:`${(e-t)/(n-t)*100}%`,right:"auto"}),[M,E]=R.useState(!1),D=dt(x=>{var I;if(s)return;x.first&&(l.current=e);const O=x.xy[0]-x.initial[0],v=(I=r.trackRef.current)===null||I===void 0?void 0:I.offsetWidth;if(!v)return;const V=O/Math.ceil(v)*(n-t);f(l.current+V,x.first,x.last),E(!x.last)},{axis:"x",pointer:{touch:!0}}),_=typeof r.popover=="function"?r.popover:r.popover?x=>x.toString():null,F=y.createElement("div",{className:`${z}-thumb`},o||y.createElement(Et,{className:`${z}-thumb-icon`}));return y.createElement("div",Object.assign({className:`${z}-thumb-container`,style:S()},D(),{role:"slider","aria-label":r["aria-label"]||m.Slider.name,"aria-valuemax":n,"aria-valuemin":t,"aria-valuenow":e,"aria-disabled":s}),_?y.createElement(ft,{content:_(e),placement:"top",visible:g||M,getContainer:null,mode:"dark"},F):F)},Mt=xt,Y="adm-slider",It={min:0,max:100,step:1,ticks:!1,range:!1,disabled:!1,popover:!1,residentPopover:!1},U=r=>{var e;const t=ct(It,r),{min:n,max:s,disabled:o,marks:g,ticks:f,step:l,icon:m}=t;function S(u){return u.sort((c,$)=>c-$)}function M(u){return t.range?u:[t.min,u]}function E(u,c){const $=j(u),C=at($.toString(),".",c);return j(C).toNumber()}function D(u){const c=Math.max(_(l),_(u[0]),_(u[1]));return t.range?u.map($=>E($,c)):E(u[1],c)}function _(u){return(`${u}`.split(".")[1]||"").length}function F(u){var c;(c=t.onAfterChange)===null||c===void 0||c.call(t,D(u))}let x=t.value;t.range&&typeof t.value=="number"&&(x=[0,t.value]);const[I,O]=ht({value:x,defaultValue:(e=t.defaultValue)!==null&&e!==void 0?e:t.range?[n,n]:n,onChange:t.onChange}),v=S(M(I));function V(u){const c=S(u),$=v;c[0]===$[0]&&c[1]===$[1]||O(D(c))}const B=R.useRef(null),h=`${100*(v[1]-v[0])/(s-n)}%`,a=`${100*(v[0]-n)/(s-n)}%`,i=R.useMemo(()=>{if(g)return Object.keys(g).map(parseFloat).sort((u,c)=>u-c);if(f){const u=[];for(let c=j(n);c.lessEquals(j(s));c=c.add(l))u.push(c.toNumber());return u}return[]},[g,f,l,n,s]);function d(u){const c=u<n?n:u>s?s:u;let $=n;if(i.length)$=Nt(i,c);else{const C=Math.round((c-n)/l),w=j(C).multi(l);$=j(n).add(w.toString()).toNumber()}return $}const N=R.useRef(0),b=u=>{if(N.current>0||(u.stopPropagation(),o))return;const c=B.current;if(!c)return;const $=c.getBoundingClientRect().left,C=(u.clientX-$)/Math.ceil(c.offsetWidth)*(s-n)+n,w=d(C);let T;t.range?Math.abs(w-v[0])>Math.abs(w-v[1])?T=[v[0],w]:T=[w,v[1]]:T=[t.min,w],V(T),F(T)},p=R.useRef(),k=u=>y.createElement(Mt,{key:u,value:v[u],min:n,max:s,disabled:o,trackRef:B,icon:m,popover:t.popover,residentPopover:t.residentPopover,onDrag:(c,$,C)=>{$&&(N.current+=1,p.current=v);const w=d(c),T=p.current;if(!T)return;const H=[...T];H[u]=w,V(H),C&&(F(H),window.setTimeout(()=>{N.current-=1},100))},"aria-label":t["aria-label"]});return tt(t,y.createElement("div",{className:K(Y,{[`${Y}-disabled`]:o})},y.createElement("div",{className:`${Y}-track-container`,onClick:b},y.createElement("div",{className:`${Y}-track`,onClick:b,ref:B},y.createElement("div",{className:`${Y}-fill`,style:{width:h,left:a}}),t.ticks&&y.createElement(yt,{points:i,min:n,max:s,lowerBound:v[0],upperBound:v[1]}),t.range&&k(0),k(1))),g&&y.createElement($t,{min:n,max:s,marks:g,lowerBound:v[0],upperBound:v[1]})))};var ut={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(lt,function(){var t,n,s=1e3,o=6e4,g=36e5,f=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m=31536e6,S=2592e6,M=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,E={years:m,months:S,days:f,hours:g,minutes:o,seconds:s,milliseconds:1,weeks:6048e5},D=function(h){return h instanceof V},_=function(h,a,i){return new V(h,i,a.$l)},F=function(h){return n.p(h)+"s"},x=function(h){return h<0},I=function(h){return x(h)?Math.ceil(h):Math.floor(h)},O=function(h){return Math.abs(h)},v=function(h,a){return h?x(h)?{negative:!0,format:""+O(h)+a}:{negative:!1,format:""+h+a}:{negative:!1,format:""}},V=function(){function h(i,d,N){var b=this;if(this.$d={},this.$l=N,i===void 0&&(this.$ms=0,this.parseFromMilliseconds()),d)return _(i*E[F(d)],this);if(typeof i=="number")return this.$ms=i,this.parseFromMilliseconds(),this;if(typeof i=="object")return Object.keys(i).forEach(function(u){b.$d[F(u)]=i[u]}),this.calMilliseconds(),this;if(typeof i=="string"){var p=i.match(M);if(p){var k=p.slice(2).map(function(u){return u!=null?Number(u):0});return this.$d.years=k[0],this.$d.months=k[1],this.$d.weeks=k[2],this.$d.days=k[3],this.$d.hours=k[4],this.$d.minutes=k[5],this.$d.seconds=k[6],this.calMilliseconds(),this}}return this}var a=h.prototype;return a.calMilliseconds=function(){var i=this;this.$ms=Object.keys(this.$d).reduce(function(d,N){return d+(i.$d[N]||0)*E[N]},0)},a.parseFromMilliseconds=function(){var i=this.$ms;this.$d.years=I(i/m),i%=m,this.$d.months=I(i/S),i%=S,this.$d.days=I(i/f),i%=f,this.$d.hours=I(i/g),i%=g,this.$d.minutes=I(i/o),i%=o,this.$d.seconds=I(i/s),i%=s,this.$d.milliseconds=i},a.toISOString=function(){var i=v(this.$d.years,"Y"),d=v(this.$d.months,"M"),N=+this.$d.days||0;this.$d.weeks&&(N+=7*this.$d.weeks);var b=v(N,"D"),p=v(this.$d.hours,"H"),k=v(this.$d.minutes,"M"),u=this.$d.seconds||0;this.$d.milliseconds&&(u+=this.$d.milliseconds/1e3);var c=v(u,"S"),$=i.negative||d.negative||b.negative||p.negative||k.negative||c.negative,C=p.format||k.format||c.format?"T":"",w=($?"-":"")+"P"+i.format+d.format+b.format+C+p.format+k.format+c.format;return w==="P"||w==="-P"?"P0D":w},a.toJSON=function(){return this.toISOString()},a.format=function(i){var d=i||"YYYY-MM-DDTHH:mm:ss",N={Y:this.$d.years,YY:n.s(this.$d.years,2,"0"),YYYY:n.s(this.$d.years,4,"0"),M:this.$d.months,MM:n.s(this.$d.months,2,"0"),D:this.$d.days,DD:n.s(this.$d.days,2,"0"),H:this.$d.hours,HH:n.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:n.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:n.s(this.$d.seconds,2,"0"),SSS:n.s(this.$d.milliseconds,3,"0")};return d.replace(l,function(b,p){return p||String(N[b])})},a.as=function(i){return this.$ms/E[F(i)]},a.get=function(i){var d=this.$ms,N=F(i);return N==="milliseconds"?d%=1e3:d=N==="weeks"?I(d/E[N]):this.$d[N],d===0?0:d},a.add=function(i,d,N){var b;return b=d?i*E[F(d)]:D(i)?i.$ms:_(i,this).$ms,_(this.$ms+b*(N?-1:1),this)},a.subtract=function(i,d){return this.add(i,d,!0)},a.locale=function(i){var d=this.clone();return d.$l=i,d},a.clone=function(){return _(this.$ms,this)},a.humanize=function(i){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!i)},a.valueOf=function(){return this.asMilliseconds()},a.milliseconds=function(){return this.get("milliseconds")},a.asMilliseconds=function(){return this.as("milliseconds")},a.seconds=function(){return this.get("seconds")},a.asSeconds=function(){return this.as("seconds")},a.minutes=function(){return this.get("minutes")},a.asMinutes=function(){return this.as("minutes")},a.hours=function(){return this.get("hours")},a.asHours=function(){return this.as("hours")},a.days=function(){return this.get("days")},a.asDays=function(){return this.as("days")},a.weeks=function(){return this.get("weeks")},a.asWeeks=function(){return this.as("weeks")},a.months=function(){return this.get("months")},a.asMonths=function(){return this.as("months")},a.years=function(){return this.get("years")},a.asYears=function(){return this.as("years")},h}(),B=function(h,a,i){return h.add(a.years()*i,"y").add(a.months()*i,"M").add(a.days()*i,"d").add(a.hours()*i,"h").add(a.minutes()*i,"m").add(a.seconds()*i,"s").add(a.milliseconds()*i,"ms")};return function(h,a,i){t=i,n=i().$utils(),i.duration=function(b,p){var k=i.locale();return _(b,{$l:k},p)},i.isDuration=D;var d=a.prototype.add,N=a.prototype.subtract;a.prototype.add=function(b,p){return D(b)?B(this,b,1):d.bind(this)(b,p)},a.prototype.subtract=function(b,p){return D(b)?B(this,b,-1):N.bind(this)(b,p)}}})})(ut);var wt=ut.exports;const Ft=mt(wt),Pt=({children:r,...e})=>{const{duration:t}=gt(Q),n=R.useRef(null),s=q.useForm()[0],o=R.useCallback(()=>{const{min:l=0,sec:m=0}=s.getFieldsValue();Q.duration=l*60+m},[s]),g=R.useCallback(()=>{const{min:l=0,sec:m=0}=s.getFieldsValue();n.current&&(n.current.innerText=`${l||0}分${m||0}秒`)},[s]),f=R.useCallback(async()=>{await vt.confirm({title:A.jsxs(A.Fragment,{children:["图片停留时间",A.jsxs("span",{ref:n,children:[Math.floor(t/60),"分",t%60,"秒"]})]}),content:A.jsxs(q,{form:s,onValuesChange:g,children:[A.jsx(q.Item,{name:"min",label:"分钟",initialValue:Math.floor(t/60),children:A.jsx(U,{min:0,max:60})}),A.jsx(q.Item,{name:"sec",label:"秒钟",initialValue:t%60,children:A.jsx(U,{min:0,max:59})})]}),onConfirm:o})},[t,s,g,o]);return A.jsx("span",{...e,onClick:f,children:r})};export{Pt as S,Ft as d};
