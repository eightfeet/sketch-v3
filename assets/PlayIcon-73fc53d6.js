import{r as l,I as F,j as e,h as w}from"./index-8cbe7cbb.js";import{F as u,S as d,B as x,e as I,D as m}from"./useDocumentTitle-ae3d75aa.js";import{R as C,a as R}from"./bundle-78ccb2c8.js";import{l as j,T as y,I as k}from"./index-c1a1aac1.js";import{u as A}from"./index-b2865fa6.js";const P="_title_1i1vs_1",g={title:P},v=({onSucess:s,onGetSN:t,onCancel:a})=>{const r=u.useForm()[0],i=l.useCallback(async()=>{j.show();const{name:c,license:n}=r.getFieldsValue();try{await F({username:c,license:n}),y.show("激活成功"),j.hide(),s==null||s()}catch(h){j.hide(),y.show(decodeURI(h))}},[r,s]);return e.jsxs(d,{direction:"vertical",block:!0,children:[e.jsx("h3",{className:g.title,children:"达文西激活"}),e.jsxs(u,{form:r,onFinish:i,className:g.formbody,children:[e.jsx(u.Item,{label:"用户名",name:"name",rules:[{required:!0,message:"请输入用户名"}],children:e.jsx(k,{placeholder:"请输入用户名"})}),e.jsx(u.Item,{label:e.jsxs(d,{block:!0,justify:"between",children:[e.jsx("span",{children:"序列号"}),e.jsx(x,{size:"mini",fill:"outline",onClick:()=>t==null?void 0:t(),children:"没有序列号"})]}),name:"license",rules:[{required:!0,message:"请输入产品序列号"}],children:e.jsx(k,{placeholder:"请输入序列号"})})]}),e.jsxs(d,{block:!0,direction:"vertical",children:[e.jsx(x,{block:!0,type:"submit",color:"primary",size:"large",onClick:r.submit,children:"确定"}),a?e.jsx(x,{block:!0,onClick:a,children:"取消"}):null]})]})},D=({onClick:s,...t})=>{const a=l.useRef(null),r=I(w),i=A(),c=l.useCallback(()=>{var o,p,b,f;(p=(o=a.current)==null?void 0:o.audioEl.current)==null||p.play(),(f=(b=a.current)==null?void 0:b.audioEl.current)==null||f.pause()},[]),n=l.useCallback(()=>{m.show({content:e.jsx(v,{onSucess:()=>m.clear(),onGetSN:()=>{m.clear(),i()},onCancel:()=>m.clear()}),actions:[]})},[i]),h=l.useCallback(o=>{if(!r.auth){n();return}c(),s==null||s(o)},[n,s,c,r.auth]);return e.jsxs(e.Fragment,{children:[e.jsx(C,{ref:a,src:"./warning.mp3"}),e.jsx(R,{fontSize:32,onClick:h,...t})]})};export{v as A,D as P};
